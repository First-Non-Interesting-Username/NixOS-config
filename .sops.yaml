# SOPS configuration - defines which keys can encrypt/decrypt secrets
# 
# IMPORTANT: Derive your age public key from the SSH host PRIVATE key:
#   sudo ssh-to-age -private-key -i /etc/ssh/ssh_host_ed25519_key | tail -1
#
# Or if sops-nix already generated a key:
#   sudo cat /var/lib/sops-nix/key.txt | grep "public key"
#
# Replace the placeholder below with your actual age public key

keys:
  # System age key (derived from SSH host private key)
  - &desktop age1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
  
  # Optional: Personal age key for editing secrets from any machine
  # Generate with: age-keygen -o ~/.config/sops/age/keys.txt
  # - &personal age1yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy

creation_rules:
  - path_regex: secrets/.*\.yaml$
    key_groups:
      - age:
          - *desktop
          # - *personal
